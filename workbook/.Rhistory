slice()
View(dex_data)
setwd("~/Desktop/INFO-478/Project")
##################################################################################################################
# Enough Sleep Vs Gender
install.packages("readxl")
##################################################################################################################
# Enough Sleep Vs Gender
install.packages("readxl")
##################################################################################################################
# Enough Sleep Vs Gender
library(readxl)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx")
View(japanese_data)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 1 , stringsAsFactors=F)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 1 , stringsAsFactors=F)
View(japanese_data)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 1)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 2)
View(japanese_data)
##
japanese_data <- japanese_data %>%
mutate(
Sex = replace(sex, sex == 1, "Male")
)
##
japanese_data<- japanese_data %>%
mutate(
Sex = replace(sex, sex == 2, "Female")
)
library(dplyr)
##
japanese_data <- japanese_data %>%
mutate(
Sex = replace(sex, sex == 1, "Male")
)
##
japanese_data<- japanese_data %>%
mutate(
Sex = replace(sex, sex == 2, "Female")
)
##
japanese_data <- japanese_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male")
)
##
japanese_data<- japanese_data %>%
mutate(
Sex = replace(Sex, Sex == 2, "Female")
)
View(japanese_data)
##
japanese_data<- japanese_data %>%
mutate(
Sex = replace(Sex, Sex == 0, "Female")
)
View(japanese_data)
gender_sleep_data <- japanese_data %>%
select(Sex, `Enough sleep`)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male"),
Sex = replace(Sex, Sex == 0, "Female")
)
View(gender_sleep_data)
gender_sleep_data <- japanese_data %>%
select(Sex, `Enough sleep`)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male"),
Sex = replace(Sex, Sex == 0, "Female")
)
View(gender_sleep_data)
##################################################################################################################
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 2)
View(japanese_data)
gender_sleep_data <- japanese_data %>%
select(Sex, `Enough sleep`)
View(gender_sleep_data)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male"),
Sex = replace(Sex, Sex == 0, "Female")
)
View(gender_sleep_data)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male"),
)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male")
)
gender_sleep_data <- japanese_data %>%
select(Sex, `Enough sleep`)
##
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male")
)
##
gender_sleep_data <- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 0, "Female")
)
View(gender_sleep_data)
gender_sleep_data <- gender_sleep_data %>%
mutate(
`Enough sleep` = replace(`Enough sleep`, `Enough sleep` == 1, "Yes")
)
gender_sleep_data <- gender_sleep_data %>%
mutate(
`Enough sleep` = replace(`Enough sleep`, `Enough sleep` == 2, "No")
)
View(gender_sleep_data)
table(gender_sleep_data)
View(table(gender_sleep_data))
sleep_data <- table(gender_sleep_data))
sleep_data <- table(gender_sleep_data)
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Sex, y = Freq, x = Enough.sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
library(ggplot2)
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Sex, y = Freq, x = Enough.sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
as.data.frame(sleep_data)
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Sex, y = Freq, x = Enough.sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
sleep_data <- as.data.frame(sleep_data)
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Sex, y = Freq, x = Enough.sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
library(scales)
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Sex, y = Freq, x = Enough.sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
gender_sleep_plot
##
View(gender_sleep_data)
colnames(sleep_data) <- c("Gender", "Enough_Sleep?", "Amount")
colnames(sleep_data) <- c("Gender", "Enough_Sleep", "Amount")
##
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount, x = `Enough_Sleep?`)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
gender_sleep_plot
colnames(sleep_data) <- c("Gender", "Enough_Sleep?", "Amount")
##
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount, x = `Enough_Sleep?`)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
gender_sleep_plot
colnames(sleep_data) <- c("Gender", "Enough_Sleep", "Amount")
##
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount, x = Enough_Sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
gender_sleep_plot
colnames(sleep_data) <- c("Gender", "Enough_Sleep", "Amount_of_People")
##
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount_of_People, x = Enough_Sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
gender_sleep_plot
setwd("~/Desktop/INFO-478/Assignments/a4-YungTC22")
##
Nth.delete <- function(dataframe, n)
##
Nth.delete <- function(dataframe, n) dataframe[-(seq(n, to = nrow(dataframe), by = n)), ]
cause_data
View(cause_data)
View(dex_data)
nrow(distinct(dex_data))
dex_data <- nrow(distinct(dex_data))
################################################################################################################################################
# Load Dataset:
dex_data <- read.csv("data/dex_result_04162019.csv", stringsAsFactors = F)
dex_data <- nrow(distinct(dex_data))
View(dex_data)
################################################################################################################################################
# Load Dataset:
dex_data <- read.csv("data/dex_result_04162019.csv", stringsAsFactors = F)
dex_data <- distinct(dex_data)
View(dex_data)
################################################################################################################################################
# A written and visual summary of how health expenditure BY CAUSE has changed OVER TIME
##
cause_data <- dex_data %>%
select(acause, year, presentable_name_long, expend)
##
cause_over_time <- aggregate(cause_data$expend, by = list(presentable_name_long = cause_data$presentable_name_long, year = cause_data$year), FUN=sum)
colnames(cause_over_time) <- c("Cause", "Year", "Expend")
##
graph_data <- aggregate(cause_over_time$Expend, by = list(Year = cause_over_time$Year), FUN = sum)
colnames(graph_data) <- c("Year", "Expend")
##
ID = graph_data$Year
##
cause_plot <- ggplot(graph_data, aes(x=Year, y=Expend, xaxt="n")) +
geom_point(aes(col=Year), size = 8) +
geom_segment(aes(x=Year,
xend=Year,
y=0,
yend=Expend)) +
labs(title="Health Expenditures",
subtitle="Over Time Expenditures",
caption="source: dex_result") +
scale_y_continuous(label=dollar_format()) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
scale_x_continuous("Year", labels = as.character(ID), breaks = ID)
cause_plot
################################################################################################################################################
# A written and visual summary of how health expenditure varies BY AGE and SEX
##
age_sex_data <- dex_data %>%
select(age, sex, expend)
##
age_sex_data <- age_sex_data %>%
mutate(
sex = replace(sex, sex == 1, "Male")
)
##
age_sex_data <- age_sex_data %>%
mutate(
sex = replace(sex, sex == 2, "Female")
)
##
sex_age <- aggregate(age_sex_data$expend, by = list(sex = age_sex_data$sex, age = age_sex_data$age), FUN=sum)
##
sex_age <- reshape(sex_age , idvar = c("age"), timevar="sex", direction="wide")
##
colnames(sex_age) <- c("Age", "Female", "Male")
##
IDs = sex_age$Age
##
age_sex_graph_data <- melt(sex_age, id = 'Age')
##
age_sex_plot <- ggplot(age_sex_graph_data, aes(x = Age, y = value, colour = variable)) +
geom_line() +
ylab(label="Health Expenditures") +
xlab("Age") +
scale_colour_manual(values=c("Red", "blue")) +
scale_y_continuous(label=dollar_format()) +
scale_x_continuous("Year", labels = as.character(IDs), breaks = IDs)
age_sex_plot
##
fun_expend_data <- dex_data %>%
select(fun, sex, expend, year)
##
fun_expend_data <- fun_expend_data %>%
mutate(
sex = replace(sex, sex == 1, "Male")
)
##
fun_expend_data <- fun_expend_data %>%
mutate(
sex = replace(sex, sex == 2, "Female")
)
##
fun_gender_data <- table(fun_expend_data$fun, fun_expend_data$sex)
##
fun_gender_data <- as.data.frame(fun_gender_data)
##
colnames(fun_gender_data) <- c("Type", "Gender", "Occurrences")
##
type_occurrences_plot <- ggplot(fun_gender_data, aes(fill=Gender, y=Occurrences, x=Type)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
type_occurrences_plot
dex_data %>%
group_by(fun) %>%
summarise(spending = sum(expend, na.rm = T)) %>%
arrange(-spending)
dex_data %>%
group_by(sex) %>%
summarise(spending = sum(expend, na.rm = T)) %>%
arrange(-spending)
setwd("~/Desktop/INFO-478/info478-JPNLifestyle/workbook")
##################################################################################################################
# Set up + library
library(readxl)
library(dplyr)
library(ggplot2)
library(scales)
##################################################################################################################
# Load Dataset
japanese_data <- read_xlsx("lifestyle dataset.xlsx", 2)
##################################################################################################################
# Load Dataset
japanese_data <- read_xlsx("data/lifestyle dataset.xlsx", 2)
setwd("~/Desktop/INFO-478/info478-JPNLifestyle/workbook")
##################################################################################################################
# Load Dataset
japanese_data <- read_xlsx("../data/lifestyle dataset.xlsx", 2)
## Filter for Sex and Amount of replies on "If they have enough sleep"
gender_sleep_data <- japanese_data %>%
select(Sex, `Enough sleep`)
## Mutate to change Sex == 1 to MALES
gender_sleep_data<- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 1, "Male")
)
## Mutate to change Sex == 0 to FEMALES
gender_sleep_data <- gender_sleep_data %>%
mutate(
Sex = replace(Sex, Sex == 0, "Female")
)
## Mutate to change Enough Sleep == 1 to YES
gender_sleep_data <- gender_sleep_data %>%
mutate(
`Enough sleep` = replace(`Enough sleep`, `Enough sleep` == 1, "Yes")
)
## Mutate to change Enough Sleep == 2 to NO
gender_sleep_data <- gender_sleep_data %>%
mutate(
`Enough sleep` = replace(`Enough sleep`, `Enough sleep` == 2, "No")
)
## View the mutated data
View(gender_sleep_data)
## Create a table then convert it to a dataframe + change colnames
sleep_data <- table(gender_sleep_data)
## Create a table then convert it to a dataframe + change colnames
sleep_data <- table(gender_sleep_data)
sleep_data <- as.data.frame(sleep_data)
colnames(sleep_data) <- c("Gender", "Enough_Sleep", "Amount_of_People")
## Plot a grouped bar graph of dataset
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount_of_People, x = Enough_Sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma)
## View dataset
gender_sleep_plot
## Plot a grouped bar graph of dataset
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount_of_People, x = Enough_Sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma) +
title("Which gender in Japan get's enough sleep?")
## Plot a grouped bar graph of dataset
gender_sleep_plot <- ggplot(sleep_data, aes(fill = Gender, y = Amount_of_People, x = Enough_Sleep)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma) +
ggtitle("Which gender in Japan get's enough sleep?")
gender_sleep_plot
setwd("~/Desktop/INFO-478/info478-JPNLifestyle/workbook")
##################################################################################################################
# Set up + library
library(readxl)
library(dplyr)
library(ggplot2)
library(scales)
##################################################################################################################
# Load Dataset
japanese_data <- read_xlsx("../data/japanData.xlsx", 2)
# Assignment #4
################################################################################################################################################
# Set UP
library(dplyr)
library(knitr)
library(formattable)
library(tidyverse)
library(ggplot2)
library(epitools)
library(plyr)
library(DT)
library(reshape)
library(scales)
################################################################################################################################################
# Load Dataset:
dex_data <- read.csv("data/dex_result_04162019.csv", stringsAsFactors = F)
dex_data <- distinct(dex_data)
## Convert to 00000
options(scipen = 999)
################################################################################################################################################
# A written and visual summary of how health expenditure BY CAUSE has changed OVER TIME
## Select data to contain causes/names/cost
cause_data <- dex_data %>%
select(acause, year, presentable_name_long, expend)
## Add all of the expenditures by the name and the year + change the column names
cause_over_time <- aggregate(cause_data$expend, by = list(presentable_name_long = cause_data$presentable_name_long, year = cause_data$year), FUN=sum)
colnames(cause_over_time) <- c("Cause", "Year", "Expend")
## Add all the expenditures by the year + change the colnames
graph_data <- aggregate(cause_over_time$Expend, by = list(Year = cause_over_time$Year), FUN = sum)
colnames(graph_data) <- c("Year", "Expend")
## Put the years into a new variable (use later in plotting)
ID = graph_data$Year
## Create a lolipop chart
cause_plot <- ggplot(graph_data, aes(x=Year, y=Expend, xaxt="n")) +
geom_point(aes(col=Year), size = 8) +
geom_segment(aes(x=Year,
xend=Year,
y=0,
yend=Expend)) +
labs(title="Health Expenditures",
subtitle="Over Time Expenditures",
caption="source: dex_result") +
scale_y_continuous(label=dollar_format()) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
scale_x_continuous("Year", labels = as.character(ID), breaks = ID)
################################################################################################################################################
# A written and visual summary of how health expenditure varies BY AGE and SEX
## Select out for needed columns (age, sex, expend)
age_sex_data <- dex_data %>%
select(age, sex, expend)
## Change sex value 1 to MALE
age_sex_data <- age_sex_data %>%
mutate(
sex = replace(sex, sex == 1, "Male")
)
## Change sex value 2 to FEMALE
age_sex_data <- age_sex_data %>%
mutate(
sex = replace(sex, sex == 2, "Female")
)
## Add all the expenditures by the sex and age
sex_age <- aggregate(age_sex_data$expend, by = list(sex = age_sex_data$sex, age = age_sex_data$age), FUN=sum)
## Reshape the data so that there is a column for female/male that contains all the expenditures grouped by the AGE + change colnames
sex_age <- reshape(sex_age , idvar = c("age"), timevar="sex", direction="wide")
colnames(sex_age) <- c("Age", "Female", "Male")
## Put Age values into a variable (use in plotting)
IDs = sex_age$Age
## From the reshape package, melt the data back to original to get a better plot (will be able to add a legend via this way)
age_sex_graph_data <- melt(sex_age, id = 'Age')
## Plot the female/male health expenditure by age via a line graph
age_sex_plot <- ggplot(age_sex_graph_data, aes(x = Age, y = value, colour = variable)) +
geom_line() +
xlab(label = "Age") +
ylab(label = "Health Expenditures") +
ggtitle("Female Health Expenditures Vs. Male Health Expenditures BY Age") +
scale_colour_manual(values=c("Red", "blue")) +
scale_y_continuous(label=dollar_format()) +
scale_x_continuous("Age", labels = as.character(IDs), breaks = IDs)
################################################################################################################################################
# A written and visual summary exploring a subset of the DATA OF MY CHOICE
# AM = ambulatory (aka outpatient)
# IP = inpatient,
# LT = nursing facility
# RX = retail pharmaceutical
# DV = dental
# ER = emergency departments
# GA = Government Administration
## Select out for the needed columns
fun_expend_data <- dex_data %>%
select(fun, sex, expend, year)
## Change sex value 1 to MALE
fun_expend_data <- fun_expend_data %>%
mutate(
sex = replace(sex, sex == 1, "Male")
)
## Change sex value 2 to FEMALE
fun_expend_data <- fun_expend_data %>%
mutate(
sex = replace(sex, sex == 2, "Female")
)
# Create the Chart
## Add all of the expenditures by the type of care
type_expend_data <- aggregate(fun_expend_data$expend, by = list(Type = fun_expend_data$fun), FUN=sum)
## Format the expenditures by adding commas + change the colnames
type_expend_data <- format(type_expend_data, big.mark=",", scientific=FALSE)
colnames(type_expend_data) <- c("Type", "Expenditures")
# Create the grouped bar plot
## Tableize the data to get the frequencies
fun_gender_data <- table(fun_expend_data$fun, fun_expend_data$sex)
## Convert table to dataframe so you can use it to create a plot + change the colnames
fun_gender_data <- as.data.frame(fun_gender_data)
colnames(fun_gender_data) <- c("Type", "Gender", "Occurrences")
## Plot the occurrences for each type of care via a grouped bar plot
type_occurrences_plot <- ggplot(fun_gender_data, aes(fill=Gender, y=Occurrences, x=Type)) +
geom_bar(position="dodge", stat="identity") +
scale_y_continuous(labels = comma) +
ggtitle("Occurrences for Each Type of Care")
################################################################################################################################################
# Helpful Code:
## Part 0
# dex_data %>%
#   group_by(sex) %>%
#   summarise(spending = sum(expend, na.rm = T)) %>%
#   arrange(-spending)
## Part 1
## Function to DELETE EVERY OTHER ROW
## Nth.delete <- function(dataframe, n) dataframe[-(seq(n, to = nrow(dataframe), by = n)), ]
## View(unique(dex_data$presentable_name_long))
## theme(axis.text.x = element_text(angle=65, vjust=0.6))
## geom_point( size = 8, color = "white", fill = alpha("orange", 0.3), alpha = 0.7, shape = 21, stroke = 2)
## Part 2
# View(sex_age_time)
# View(table(age_sex_data$sex))
# View(table(age_sex_data$age, age_sex_data$sex))
# age_sex_plot <- ggplot(sex_age_time, aes(x = age, colour = variable)) +
#   geom_line(aes(y = x.Male), colour = "blue") +
#   geom_line(aes(y = x.Female), colour = "red") +
#   ylab(label = "Expenditures") +
#   xlab("Age") +
#   scale_y_continuous(labels = comma) +
#   scale_x_continuous("Year", labels = as.character(IDs), breaks = IDs)
## Part 3
# type_expend_data <- aggregate(fun_expend_data$expend, by = list(Type = fun_expend_data$fun), FUN=sum)
# type_expend_data <- prettyNum(type_expend_data$x, big.mark=",")
# type_expend_data <- merge(fun_gender_data, type_expend_data)
# View(sum(dex_data$expend))
type_occurrences_plot
